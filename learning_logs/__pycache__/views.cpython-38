U

    q{Âµ^Ã‹  Ã£                   @   sÂ    d dl mZmZ d dlmZmZ d dlmZ d dlm	Z	 ddl
mZmZ ddl
mZmZ dd	â€ Ze	d
dâ€ Æ’Ze	dd
â€ Æ’Ze	ddâ€ Æ’Ze	ddâ€ Æ’Ze	ddâ€ Æ’ZdS )Ã©    )ÃšrenderÃšget_object_or_404)ÃšHttpResponseRedirectÃšHttp404)Ãšreverse)Ãšlogin_requiredÃ©   )ÃšTopicÃšEntry)Ãš	TopicFormÃš	EntryFormc                 C   s
   t | dÆ’S )zThe home page for Learning Logzlearning_logs/index.html)r   )ÃšrequestÂ© r   ÃºEC:\Users\the laptop store\Desktop\learning_log\learning_logs\views.pyÃšindex	   s    r   c                 C   s*   t jj| jdÂÂ dÂ¡}d|i}t| d|Æ’S )zShow all topics)ÃšownerÃš
date_addedÃštopicszlearning_logs/topics.html)r	   ÃšobjectsÃšfilterÃšuserÃšorder_byr   )r
   r   Ãšcontextr   r   r   r   
   s    r   c                 C   s>   t t|dÂ}|j| jkrtâ€š|jÂ dÂ¡}||dÅ“}t| d|Æ’S )z(Show a single topic and all its entries.Â©Ãšidz-date_added)ÃštopicÃšentrieszlearning_logs/topic.html)r   r	   r   r   r   Ãš	entry_setr   r   )r
   Ãštopic_idr   r   r   r   r   r   r      s    
r   c                 C   s`   | j dkrtÆ’ }n:t| jÆ’}|Â Â¡ rL|jddÂ}| j|_|Â Â¡  ttdÆ’Æ’S d|i}t	| d|Æ’S )zAdd a new topic.ÃšPOSTFÂ©Ãšcommitzlearning_logs:topicsÃšformzlearning_logs/new_topic.html)
Ãšmethodr   r   Ãšis_validÃšsaver   r   r   r   r   )r
   r"   Ãš	new_topicr   r   r   r   r&   !   s    

r&   c                 C   sv   t jj|dÂ}| jdkr tÆ’ }n@t| jdÂ}|Â Â¡ r`|jddÂ}||_|Â Â¡  t	t
d|gdÂÆ’S ||dÅ“}t| d	|Æ’S )
z'Add a new entry for a particular topic.r   r   )ÃšdataFr    Ãºlearning_logs:topicÂ©Ãšargs)r   r"   zlearning_logs/new_entry.html)r	   r   Ãšgetr#   r   r   r$   r%   r   r   r   r   )r
   r   r   r"   Ãš	new_entryr   r   r   r   r,   3   s    
Ã¿
r,   c                 C   sâ€   t jj|dÂ}|j}|j| jkr$tâ€š| jdkr:t|dÂ}n2t|| j	dÂ}|Â 
Â¡ rl|Â Â¡  tt
d|jgdÂÆ’S |||dÅ“}t| d|Æ’S )	z"Edit an existing entry.r   r   )Ãšinstance)r-   r'   r(   r)   )Ãšentryr   r"   zlearning_logs/edit_entry.html)r
   r   r+   r   r   r   r   r#   r   r   r$   r%   r   r   r   r   )r
   Zentry_idr.   r   r"   r   r   r   r   Ãš
edit_entryG   s    
Ã¿r/   N)Ãšdjango.shortcutsr   r   Ãšdjango.httpr   r   Ãšdjango.urlsr   Ãšdjango.contrib.auth.decoratorsr   Ãšmodelsr	   r
   Ãšformsr   r   r   r   r   r&   r,   r/   r   r   r   r   Ãš<module>   s    




